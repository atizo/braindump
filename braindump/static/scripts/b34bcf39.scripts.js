"use strict";angular.module("braind",["ngCookies","ngResource","ngSanitize","ngRoute","ngAnimate","restangular","monospaced.elastic","ngClipboard"]).config(["$routeProvider","$locationProvider","$httpProvider","$provide","ngClipProvider",function(a,b,c,d,e){b.html5Mode(!0),c.defaults.xsrfHeaderName="X-CSRFToken",c.defaults.xsrfCookieName="csrftoken",a.when("/",{templateUrl:"/static/views/main.html",controller:"StartCtrl"}).when("/:brainstorming/invite",{templateUrl:"/static/views/invite.html",controller:"InviteCtrl"}).when("/:brainstorming",{templateUrl:"/static/views/brainstorming.html",controller:"BrainstormingCtrl"}).otherwise({redirectTo:"/"}),e.setPath("/static/bower_components/zeroclipboard/ZeroClipboard.swf");var f=angular.copy(window.initialBrainstorming);d.constant("initialBrainstorming",f);var g=angular.copy(window.initialIdeas);d.constant("initialIdeas",g)}]),angular.module("braind").controller("StartCtrl",["$scope","$location","Restangular","brainstormingService",function(a,b,c,d){a.create=function(){d.create(a.formData).then(function(a){b.path("/"+a.id+"/invite")})},a.reset=function(){a.formData={question:"",creatorEmail:"",details:""}},a.reset()}]),angular.module("braind").controller("InviteCtrl",["$scope","$location","brainstormingService",function(a,b,c){var d=c.getBrainstorming();d||b.path("/"),d.then(function(b){a.bs=b}),a.hallo=function(){return"sdfgsfdgs"}}]),angular.module("braind").controller("BrainstormingCtrl",["$scope","brainstormingService",function(a,b){b.getBrainstorming().then(function(b){a.brainstorming=b}),b.getIdeas().then(function(b){a.ideas=b}),a.create=function(){b.createIdea(a.formData),a.reset(),a.fullform=!1},a.reset=function(){a.formData={title:"",text:""}},a.reset()}]),angular.module("braind").factory("brainstormingService",["Restangular","$q","initialBrainstorming","initialIdeas",function(a,b,c,d){function e(){i.getList("ideas").then(function(a){h=a})}var f={},g="api/brainstormings",h=null,i=null;return c&&(i=a.restangularizeElement(null,c,g),d?h=a.restangularizeCollection(i,d,"ideas"):e()),f.create=function(b){return a.all(g).post(b).then(function(a){return i=a,e(),a})},f.getBrainstorming=function(){return b.when(i)},f.getIdeas=function(){return b.when(h)},f.createIdea=function(a){return h.post(a).then(function(a){return h.push(a),a})},f}]);